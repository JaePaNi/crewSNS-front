(this.webpackJsonpsns=this.webpackJsonpsns||[]).push([[0],{335:function(e,t,n){"use strict";n.r(t);var c=n(6),r=n(48),a=n(0),s=n.n(a),i=n(19),o=n.n(i),u=n(79),l=n(340),j=n(59),b=n(62),d=n(29),p=n(32),f=n(13),O=n.n(f),h=n(36),x=n(40),m=n(56),g=n.n(m);g.a.defaults.baseURL="http://ec2-3-34-186-234.ap-northeast-2.compute.amazonaws.com";var v=Object(x.b)("user/fetchRegist",function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/user",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=Object(x.b)("user/fetchLogin",function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/user/login",t,{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=Object(x.b)("user/fetchLoadUser",Object(h.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/user",{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),w=Object(x.b)("user/fetchLogout",Object(h.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/user/logout",{},{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),P=n(49),C=n(34),I=n(338),R=n(174);function L(){var e=Object(r.a)(["\n    margin: 5px 0;\n"]);return L=function(){return e},e}function S(){var e=Object(r.a)(["\n  position: sticky;\n  top: 15px;\n"]);return S=function(){return e},e}var T=l.a.Title,U=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.storeUser})),n=t.userNickname,r=t.userId,s=Object(a.useCallback)((function(){e(w())}),[]);return Object(c.jsx)(z,{children:Object(c.jsx)(I.a,{size:"small",hoverable:!0,children:Object(c.jsxs)(u.a,{children:[Object(c.jsx)(j.a,{span:24,style:{textAlign:"center"},children:Object(c.jsxs)(T,{level:4,children:["#"===n?r:n,"\ub2d8"]})}),Object(c.jsx)(A,{span:24,children:Object(c.jsx)(b.b,{to:"/addpost",children:Object(c.jsx)(R.a,{type:"ghost",block:!0,children:"\ud3ec\uc2a4\ud2b8 \uc791\uc131"})})}),Object(c.jsx)(A,{span:24,children:Object(c.jsx)(R.a,{danger:!0,block:!0,onClick:s,children:"\ub85c\uadf8\uc544\uc6c3"})})]})})})},E=Object(a.memo)(U),z=P.b.div(S()),A=Object(P.b)(j.a)(L()),F=n(1),N=n(339),q=n(342);function _(){var e=Object(r.a)(["\n  position: sticky;\n  top: 15px;\n"]);return _=function(){return e},e}function D(){var e=Object(r.a)(["\n  margin-right: 10px;\n"]);return D=function(){return e},e}var J,M=function(){var e=Object(a.useRef)(),t=Object(p.b)(),n=Object(p.c)((function(e){return e.storeUser})),r=n.loading,s=n.error,i=Object(a.useCallback)((function(e){t(y(Object(F.a)({},e)))}),[]);return Object(a.useEffect)((function(){s&&alert("\uc544\uc774\ub514 \ub610\ub294 \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4.")}),[s]),Object(a.useEffect)((function(){e.current.focus()}),[]),Object(c.jsx)(W,{children:Object(c.jsxs)(N.a,{size:"middle",onFinish:i,wrapperCol:{md:18,xs:12},children:[Object(c.jsx)(N.a.Item,{name:"id",rules:[{required:!0,message:"\uacc4\uc815 \uc785\ub825"}],children:Object(c.jsx)(q.a,{placeholder:"\uc544\uc774\ub514",ref:e})}),Object(c.jsx)(N.a.Item,{name:"pw",rules:[{required:!0,message:"\ube44\ubc00\ubc88\ud638 \uc785\ub825"}],children:Object(c.jsx)(q.a,{type:"password",placeholder:"\ube44\ubc00\ubc88\ud638"})}),Object(c.jsxs)(N.a.Item,{children:[Object(c.jsx)(G,{type:"primary",htmlType:"submit",loading:r&&!0,children:"\ub85c\uadf8\uc778"}),Object(c.jsx)(R.a,{type:"ghost",children:Object(c.jsx)(b.b,{to:"/signup",children:"\ud68c\uc6d0\uac00\uc785"})})]})]})})},B=Object(a.memo)(M),G=Object(P.b)(R.a)(D()),W=P.b.div(_()),H=s.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,371))})),K=function(){var e=Object(p.c)((function(e){return e.storeUser})).isLogin;return Object(c.jsxs)(u.a,{justify:"center",children:[Object(c.jsx)(j.a,{md:2}),Object(c.jsx)(j.a,{md:22,xs:22,children:Object(c.jsxs)(u.a,{justify:"space-around",children:[Object(c.jsx)(j.a,{md:6,xs:24,children:!0===e?Object(c.jsx)(E,{}):Object(c.jsx)(B,{})}),Object(c.jsx)(j.a,{md:1}),Object(c.jsx)(j.a,{md:17,xs:24,children:Object(c.jsx)(a.Suspense,{fallback:Object(c.jsx)("div",{children:"loading..."}),children:Object(c.jsx)(H,{})})})]})})]})},Q=n(7),V=n(5),X=Object(x.c)({name:"user",initialState:{loading:!1,error:!1,isLogin:!1,userId:null,userNickname:null,regist:!1},reducers:{registReset:function(e){e.regist=!1,e.loading=!1}},extraReducers:(J={},Object(V.a)(J,v.pending,(function(e){e.loading=!0,e.error=!1})),Object(V.a)(J,v.fulfilled,(function(e){e.regist=!0})),Object(V.a)(J,v.rejected,(function(e){e.loading=!1,e.error=!0})),Object(V.a)(J,y.pending,(function(e){e.loading=!0,e.error=!1})),Object(V.a)(J,y.fulfilled,(function(e,t){e.isLogin=!0,e.userId=t.payload.data.user_id,e.userNickname=t.payload.data.user_nickname})),Object(V.a)(J,y.rejected,(function(e){e.loading=!1,e.error=!0})),Object(V.a)(J,k.pending,(function(e){e.loading=!0})),Object(V.a)(J,k.fulfilled,(function(e,t){e.isLogin=!0,e.userId=t.payload.data.user_id,e.userNickname=t.payload.data.user_nickname})),Object(V.a)(J,k.rejected,(function(e){e.loading=!1})),Object(V.a)(J,w.pending,(function(e){e.loading=!0})),Object(V.a)(J,w.fulfilled,(function(e){e.isLogin=!1,e.userId=null,e.userNickname=null,e.loading=!1,e.error=!1,e.regist=!1})),Object(V.a)(J,w.rejected,(function(e){e.loading=!1})),J)}),Y=X.actions.registReset,Z=X.reducer;function $(){var e=Object(r.a)(["\n  font-weight: bold;\n  color: red;\n"]);return $=function(){return e},e}function ee(){var e=Object(r.a)(["\n  margin-right: 10px;\n"]);return ee=function(){return e},e}var te,ne=function(){var e=Object(a.useState)({pw:null,pwCheck:!1}),t=Object(Q.a)(e,2),n=t[0],r=t[1],s=Object(a.useRef)(),i=Object(p.b)(),o=Object(p.c)((function(e){return e.storeUser})),l=o.loading,b=o.regist,f=o.error,O=Object(d.e)(),h=Object(a.useCallback)((function(e){n.pwCheck&&i(v(e))}),[n]),x=Object(a.useCallback)((function(e){r(Object(F.a)(Object(F.a)({},n),{},{pw:e.target.value}))}),[n]),m=Object(a.useCallback)((function(e){n.pw===e.target.value?r(Object(F.a)(Object(F.a)({},n),{},{pwCheck:!0})):r(Object(F.a)(Object(F.a)({},n),{},{pwCheck:!1}))}),[n]);return Object(a.useEffect)((function(){l&&b&&(alert("\ud68c\uc6d0\uac00\uc785 \uc131\uacf5"),i(Y()),O.push("/")),!1===l&&f&&alert("\uc911\ubcf5\ub418\ub294 \uc544\uc774\ub514 \uc785\ub2c8\ub2e4.")}),[b,l,f]),Object(a.useEffect)((function(){return s.current.focus()}),[]),Object(c.jsx)(u.a,{justify:"center",children:Object(c.jsx)(j.a,{md:6,xs:22,children:Object(c.jsxs)(N.a,{size:"middle",onFinish:h,wrapperCol:{md:24,xs:12},children:[Object(c.jsx)(N.a.Item,{name:"id",rules:[{required:!0,message:"\uc0ac\uc6a9\ud560 \uacc4\uc815 \uc785\ub825\ud574\uc8fc\uc138\uc694"}],children:Object(c.jsx)(q.a,{placeholder:"\uc0ac\uc6a9\ud560 \uc544\uc774\ub514",ref:s})}),Object(c.jsx)(N.a.Item,{name:"pw",rules:[{required:!0,message:"\uc0ac\uc6a9\ud560 \ube44\ubc00\ubc88\ud638 \uc785\ub825\ud574\uc8fc\uc138\uc694"}],children:Object(c.jsx)(q.a.Password,{placeholder:"\uc0ac\uc6a9\ud560 \ube44\ubc00\ubc88\ud638",onChange:x})}),Object(c.jsxs)(N.a.Item,{name:"pwCheck",children:[Object(c.jsx)(q.a.Password,{placeholder:"\ube44\ubc00\ubc88\ud638 \ud655\uc778",onChange:m}),!1===n.pwCheck?Object(c.jsx)(re,{children:"\ube44\ubc00\ubc88\ud638\uac00 \ub2e4\ub985\ub2c8\ub2e4."}):void 0]}),Object(c.jsx)(N.a.Item,{children:Object(c.jsx)(ce,{type:"primary",htmlType:"submit",loading:l&&!0,block:!0,children:"\ud68c\uc6d0\uac00\uc785"})})]})})})},ce=Object(P.b)(R.a)(ee()),re=P.b.div($()),ae=n(341),se=n(8),ie=Object(x.c)({name:"post",initialState:{loading:!1,error:!1,createPost:!1,callPost:!1,Post:[],PostImages:[],PostReply:[],images:[]},reducers:{removeImage:function(e,t){e.images=e.images.filter((function(e,n){return n!==t.payload}))},postStatus:function(e){e.images=[],e.createPost=!1},resetPost:function(e){e.Post=[]}},extraReducers:(te={},Object(V.a)(te,C.b.pending,(function(e,t){})),Object(V.a)(te,C.b.fulfilled,(function(e,t){e.images=e.images.concat(t.payload.data)})),Object(V.a)(te,C.b.rejected,(function(e,t){})),Object(V.a)(te,C.a.pending,(function(e,t){console.log("createPost pending")})),Object(V.a)(te,C.a.fulfilled,(function(e,t){console.log("createPost fulfilled"),e.createPost=!0})),Object(V.a)(te,C.a.rejected,(function(e,t){console.log("createPost rejected")})),Object(V.a)(te,C.c.pending,(function(e,t){e.loading=!0,e.error=!1})),Object(V.a)(te,C.c.fulfilled,(function(e,t){var n,c,r;e.callPost=!0,e.Post=(n=e.Post).concat.apply(n,Object(se.a)(t.payload.content)),e.PostImages=(c=e.PostImages).concat.apply(c,Object(se.a)(t.payload.image)),e.PostReply=(r=e.PostReply).concat.apply(r,Object(se.a)(t.payload.reply))})),Object(V.a)(te,C.c.rejected,(function(e,t){e.error=!0,e.loading=!1,e.callPost=!1})),Object(V.a)(te,C.d.pending,(function(e,t){})),Object(V.a)(te,C.d.fulfilled,(function(e,t){console.log("fetchReply fulfilled",t.payload),e.PostReply.push(Object(F.a)(Object(F.a)({},e.PostReply),t.payload.data))})),Object(V.a)(te,C.d.rejected,(function(e,t){})),te)}),oe=ie.actions,ue=oe.removeImage,le=oe.postStatus,je=oe.resetPost,be=ie.reducer,de=function(){var e=Object(a.useRef)(),t=Object(d.e)(),n=Object(p.b)(),r=Object(p.c)((function(e){return e.storeUser})),s=r.isLogin,i=r.userId,o=Object(p.c)((function(e){return e.storePost})),b=o.images,f=o.createPost,O=Object(a.useCallback)((function(e){for(var t=new FormData,c=0;c<e.target.files.length;c++)t.append("image",e.target.files[c],e.target.files[c].name);n(Object(C.b)(t))}),[]),h=Object(a.useCallback)((function(){e.current.click()}),[e.current]),x=Object(a.useCallback)((function(e){for(var t=new FormData,c=0;c<b.length;c++)console.log("image value :: ",b[c]),t.append("images",b[c]);t.append("title",e.title),t.append("content",e.content),t.append("user",i),n(Object(C.a)(t))}),[b]),m=Object(a.useCallback)((function(e){return function(){n(ue(e))}}),[]);return Object(a.useEffect)((function(){f&&(n(le()),n(je()),alert("\ud3ec\uc2a4\ud2b8\uac00 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),t.push("/"))}),[f]),Object(a.useEffect)((function(){!s&&t.push("/")}),[]),Object(c.jsxs)(u.a,{justify:"center",children:[Object(c.jsx)(j.a,{md:22,xs:22,style:{textAlign:"center",margin:"50px 0",fontSize:20},children:Object(c.jsx)(l.a.Title,{level:3,children:"\ud3ec\uc2a4\ud2b8 \uc791\uc131"})}),Object(c.jsx)(j.a,{md:10,xs:22,children:Object(c.jsxs)(N.a,{onFinish:x,encType:"multipart/form-data",children:[Object(c.jsx)(N.a.Item,{name:"title",children:Object(c.jsx)(q.a,{placeholder:"\ud3ec\uc2a4\ud2b8\uc758 \uc81c\ubaa9\uc740 \ubb34\uc5c7\uc778\uac00\uc694?"})}),Object(c.jsx)(N.a.Item,{name:"content",children:Object(c.jsx)(q.a.TextArea,{placeholder:"\uc5b4\ub5a4 \ub0b4\uc6a9\uc744 \uc791\uc131\ud558\uc2dc\uaca0\uc5b4\uc694?",autoSize:{minRows:7}})}),Object(c.jsx)("input",{ref:e,type:"file",multiple:!0,hidden:!0,onChange:O,encType:"multipart/form-data"}),Object(c.jsx)(R.a,{block:!0,onClick:h,icon:Object(c.jsx)(ae.a,{}),children:"\uc774\ubbf8\uc9c0\ub97c \uc5c5\ub85c\ub4dc \ud558\uc2dc\uaca0\uc5b4\uc694?"}),Object(c.jsx)(N.a.Item,{children:Object(c.jsx)("div",{style:{display:"flex"},children:0!==b.length&&b.map((function(e,t){return Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:e,width:"100px",height:"auto"}),Object(c.jsx)("div",{children:Object(c.jsx)(R.a,{onClick:m(t),children:"\uc9c0\uc6b0\uae30"})})]})}))})}),Object(c.jsx)(N.a.Item,{children:Object(c.jsx)(R.a,{block:!0,type:"primary",htmlType:"submit",children:"\ud3ec\uc2a4\ud2b8 \uc5c5\ub85c\ub4dc"})})]})})]})};function pe(){var e=Object(r.a)(["\n  padding: 15px 0;\n  margin-bottom: 20px;\n  text-align: center;\n  color: black;\n"]);return pe=function(){return e},e}var fe=function(){var e=Object(p.c)((function(e){return e.storeUser})).isLogin,t=Object(p.b)();return Object(a.useEffect)((function(){!e&&t(k())}),[]),Object(c.jsxs)(u.a,{children:[Object(c.jsx)(Oe,{span:24,children:Object(c.jsx)(l.a.Title,{level:3,children:"CREW STAGRAM"})}),Object(c.jsx)(j.a,{span:24,children:Object(c.jsxs)(b.a,{children:[Object(c.jsx)(d.a,{exact:!0,path:"/",children:Object(c.jsx)(K,{})}),Object(c.jsx)(d.a,{exact:!0,path:"/signup",children:Object(c.jsx)(ne,{})}),Object(c.jsx)(d.a,{exact:!0,path:"/addpost",children:Object(c.jsx)(de,{})})]})})]})},Oe=Object(P.b)(j.a)(pe()),he=n(50),xe=Object(he.c)({storeUser:Z,storePost:be}),me=Object(x.a)({reducer:xe}),ge=n(173);function ve(){var e=Object(r.a)(["\n  * {\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    background-color: #fff3e0;\n  }\n"]);return ve=function(){return e},e}n.n(ge).a.config();var ye=Object(P.a)(ve());o.a.render(Object(c.jsxs)(s.a.StrictMode,{children:[Object(c.jsx)(p.a,{store:me,children:Object(c.jsx)(fe,{})}),Object(c.jsx)(ye,{})]}),document.getElementById("root"))},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return b}));var c=n(13),r=n.n(c),a=n(36),s=n(40),i=n(56),o=n.n(i);o.a.defaults.baseURL="http://ec2-3-34-186-234.ap-northeast-2.compute.amazonaws.com";var u=Object(s.b)("post/fetchCreatePost",function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/post/postCreate",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=Object(s.b)("post/fetchImages",function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/post/postImages",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(s.b)("post/fetchPost",function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/post/postCall?skip=".concat(t,"&take=",4)).then((function(e){return e.data}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=Object(s.b)("post/fetchReply",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.index,e.next=3,o.a.post("/post/".concat(n,"/postReply"),t);case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},[[335,1,2]]]);
//# sourceMappingURL=main.42ed5f58.chunk.js.map